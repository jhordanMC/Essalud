<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Citas M√©dicas - EsSalud</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="primermodulo.css">
</head>
<body>
    <div class="top-container">
        <div class="logo-section">
            <div class="top-logo-container">
                <img src="https://dondemeatiendo.essalud.gob.pe/assets/images/logo-essalud-v2.png" alt="Logo EsSalud">
            </div>
        </div>
        <div class="nav-section">
            <div class="nav-buttons">
                <button class="nav-button" onclick="window.location.href='GestionDeHorariosEssalud.html'">Consultar m√©dicos</button>
                <button class="nav-button" onclick="window.location.href='GenerarCita.html'">Gestionar Citas</button>
                <button class="nav-button" onclick="alert('Generando reportes (en desarrollo).')">Generar reportes</button>
                <button class="nav-button" onclick="window.location.href='lugardeatencion.html'">¬øD√≥nde me atiendo?</button>
                <button class="nav-button" onclick="window.location.href='Historialcitas.html'">Ver historial de citas</button>
            </div>
            <div class="relative">
                <button id="user-menu-button" class="user-menu-button">
                    <span id="user-initials">U</span>
                </button>
                <div id="user-menu" class="user-menu">
                    <a href="#" id="view-profile">Ver perfil</a>
                    <a href="#" id="logout">Cerrar sesi√≥n</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL DE PERFIL -->
    <div id="profile-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Mi Perfil</h2>
                <button class="modal-close" id="close-profile-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="profile-loader" style="text-align: center; padding: 40px;">
                    <div style="display: inline-block; width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #0078D7; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                    <p style="margin-top: 20px; color: #666;">Cargando perfil...</p>
                </div>
                
                <div id="profile-content" style="display: none;">
                    <div class="profile-avatar" id="profile-avatar">
                        <span id="profile-avatar-text">U</span>
                    </div>
                    <div class="profile-info">
                        <div style="margin-bottom: 20px;">
                            <h3 style="color: #0078D7; font-size: 16px; margin-bottom: 10px; border-bottom: 2px solid #0078D7; padding-bottom: 5px;">üìã Informaci√≥n Personal</h3>
                            <div class="info-row">
                                <span class="info-label">Nombre:</span>
                                <span class="info-value" id="profile-name">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">C√≥digo:</span>
                                <span class="info-value" id="profile-code">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Documento:</span>
                                <span class="info-value" id="profile-document">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Fecha Nac.:</span>
                                <span class="info-value" id="profile-birth">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Edad:</span>
                                <span class="info-value" id="profile-age">-</span>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h3 style="color: #0078D7; font-size: 16px; margin-bottom: 10px; border-bottom: 2px solid #0078D7; padding-bottom: 5px;">üìû Contacto</h3>
                            <div class="info-row">
                                <span class="info-label">Correo:</span>
                                <span class="info-value" id="profile-email">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Tel√©fono:</span>
                                <span class="info-value" id="profile-phone">-</span>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="color: #0078D7; font-size: 16px; margin-bottom: 10px; border-bottom: 2px solid #0078D7; padding-bottom: 5px;">‚öôÔ∏è Sistema</h3>
                            <div class="info-row">
                                <span class="info-label">Usuario:</span>
                                <span class="info-value" id="profile-username">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">ID Sistema:</span>
                                <span class="info-value" id="profile-id">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Fecha Registro:</span>
                                <span class="info-value" id="profile-register-date">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="profile-error" style="display: none; text-align: center; padding: 40px; color: #d32f2f;">
                    <p style="font-size: 18px; margin-bottom: 10px;">‚ùå Error al cargar perfil</p>
                    <p id="profile-error-message" style="font-size: 14px;"></p>
                    <button onclick="loadUserProfile()" style="margin-top: 20px; padding: 10px 20px; background: #0078D7; color: white; border: none; border-radius: 8px; cursor: pointer;">Reintentar</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="decorative-image">
        <img src="https://pbs.twimg.com/media/Es7eTNcW4AAReWi.jpg:large" alt="Decoraci√≥n">
    </div>
    <div class="content">
    </div>
    
    <!-- CHAT WIDGET CON ROBOT 3D -->
    <button class="support-button" id="support-button">
        <canvas id="bot-canvas"></canvas>
    </button>

    <div class="chat-shell" id="chat-shell" role="application" aria-label="Chat de soporte">
        <div class="chat-header">
            <button id="minimize-chat" title="Minimizar chat">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M4 12h16v2H4z"></path>
                </svg>
            </button>
            <button id="close-chat" title="Cerrar chat">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M6.707 5.293a1 1 0 0 0-1.414 1.414L10.586 12l-5.293 5.293a1 1 0 1 0 1.414 1.414L12 13.414l5.293 5.293a1 1 0 0 0 1.414-1.414L13.414 12l5.293-5.293a1 1 0 0 0-1.414-1.414L12 10.586 6.707 5.293z"></path>
                </svg>
            </button>
        </div>
        <div class="chat-body" id="chatBody">
        
        </div>
        <div class="ChatFooterHoveringButtonSection_section__6i4Bc">
            <span class="ChatFooterHoveringButtonSection_left__Lt5yM chat-floating-dot" title="left"></span>
            <span class="ChatFooterHoveringButtonSection_center__KuhMd chat-floating-dot" style="width:16px;height:16px" title="center"></span>
            <span class="ChatFooterHoveringButtonSection_right__Qbc1p chat-floating-dot" title="right"></span>
        </div>
        <div class="ChatPageMainFooter_footerInner__BEj26" role="region" aria-label="√Årea de entrada de mensaje">
            <div>
                <div class="ChatMessageInputFooter_footer__v4dFF">
                    <div class="ChatMessageInputContainer_inputContainer__s2AGa" data-input-is-empty="true" tabindex="-1">
                        <div class="GrowingTextArea_growWrap__im5W3 ChatMessageInputContainer_textArea__fNi6E" data-replicated-value="">
                            <textarea class="GrowingTextArea_textArea__ZWQbP"
                                      rows="1"
                                      placeholder="Mensaje"
                                      aria-label="Escribe un mensaje"></textarea>
                            <div class="GrowingTextArea_hidden__xLW0K" aria-hidden="true"></div>
                        </div>
                        <div class="ChatMessageInputContainer_actionContainerLeft__dIwkm ChatMessageInputContainer_actionContainerBase__8BKrX">
                            <div>
                                <button class="button_root__TL8nv button_ghost__YsMI5 button_sm__hWzjK button_center__RsQ_o button_showIconOnly-always__05Gb5"
                                        type="button"
                                        aria-label="Borrar contexto"
                                        data-button-chat-break="true"
                                        title="Borrar contexto">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path d="M17 10.5h-3.5V4c0-1.378-1.122-2.5-2.5-2.5A2.503 2.503 0 0 0 8.5 4v6.5H5a1 1 0 0 0-1 1v3a.99.99 0 0 0 .894.979 19 19 0 0 1-.365 1.779 11.6 11.6 0 0 1-1.363 3.188A1 1 0 0 0 4 22h3.5a1 1 0 0 0 .949-.684l.051-.154.051.154A1 1 0 0 0 9.5 22H14c.334 0 .646-.167.832-.445.045-.067 1.103-1.669 1.638-3.812.242-.968.372-1.708.443-2.242H17a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1.001M10.5 4a.5.5 0 0 1 1 0v6.5h-1zM6 12.5h10v1H6zm8.53 4.758A11.7 11.7 0 0 1 13.431 20H10.22l-.772-2.316a.998.998 0 0 0-1.897 0L6.779 20H5.671c.284-.622.584-1.396.799-2.258.242-.968.371-1.708.443-2.242h7.979a20 20 0 0 1-.362 1.758M18.5 21.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M21 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path>
                                    </svg>
                                    <span class="button_label__mCaDf"></span>
                                </button>
                            </div>
                            <div class="ChatMessageInputContainer_breakSeparator__6WnHy" aria-hidden="true"></div>
                            <div>
                                <button class="button_root__TL8nv button_ghost__YsMI5 button_sm__hWzjK button_center__RsQ_o button_showIconOnly-always__05Gb5"
                                        type="button"
                                        aria-label="Seleccionar adjunto"
                                        data-button-file-input="true"
                                        title="Adjuntar archivo">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path d="M13 4.5a1 1 0 1 0-2 0V11H4.5a1 1 0 1 0 0 2H11v6.5a1 1 0 1 0 2 0V13h6.5a1 1 0 1 0 0-2H13z"></path>
                                    </svg>
                                    <span class="button_label__mCaDf"></span>
                                </button>
                            </div>
                            <input class="ChatMessageFileInputButton_input__svNx4" type="file" multiple aria-hidden="true" />
                        </div>
                        <div class="ChatMessageInputContainer_actionContainerRight__fyfsX ChatMessageInputContainer_actionContainerBase__8BKrX">
                            <div class="ChatMessageVoiceInputButton_container__B5Uev">
                                <button class="button_root__TL8nv button_ghost__YsMI5 button_sm__hWzjK button_center__RsQ_o button_isDisabled__pJu5B button_showIconOnly-always__05Gb5 ChatMessageVoiceInputButton_button__NjXno"
                                        type="button"
                                        aria-selected="false"
                                        data-button-voice-input="true"
                                        disabled
                                        title="Entrada de voz (no disponible)">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path d="M12 15.452a3.55 3.55 0 0 0 3.543-3.543V5.543A3.547 3.547 0 0 0 12 2a3.547 3.547 0 0 0-3.543 3.543v6.366A3.547 3.547 0 0 0 12 15.452m-1.543-9.909C10.457 4.692 11.149 4 12 4s1.543.692 1.543 1.543v6.366c0 .851-.692 1.543-1.543 1.543a1.545 1.545 0 0 1-1.543-1.543z"></path>
                                        <path d="M18.775 12.139v-1.3a1 1 0 1 0-2 0v1.3a4.48 4.48 0 0 1-4.474 4.474h-.291l-.01-.002-.01.002h-.292a4.48 4.48 0 0 1-4.474-4.474v-1.3a1 1 0 0 0-2 0v1.3c0 3.334 2.533 6.085 5.775 6.435V20H8a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2h-3v-1.426c3.242-.35 5.775-3.101 5.775-6.435"></path>
                                    </svg>
                                </button>
                            </div>
                            <button class="button_root__TL8nv button_ghost__YsMI5 button_sm__hWzjK button_center__RsQ_o button_isDisabled__pJu5B button_showIconOnly-always__05Gb5"
                                    type="button"
                                    aria-label="Enviar mensaje"
                                    data-button-send="true"
                                    data-theme="ghost"
                                    disabled
                                    title="Enviar">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                    <path d="M4 11h14.09L11.3 4.21a.996.996 0 1 1 1.41-1.41l8.5 8.5c.06.06.09.13.13.2.03.04.06.08.08.13.05.11.08.24.08.37 0 .03-.01.05-.01.07-.01.1-.02.21-.06.31-.05.13-.13.24-.22.33l-8.49 8.49c-.2.2-.45.29-.71.29s-.51-.1-.71-.29a.996.996 0 0 1 0-1.41L18.08 13H4c-.55 0-1-.45-1-1s.45-1 1-1"></path>
                                </svg>
                                <span class="button_label__mCaDf"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="primermodulo.js"></script>
</body>
</html>