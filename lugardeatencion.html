<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lugar de AtenciÃ³n - Sistema de Citas MÃ©dicas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- Leaflet Routing Machine CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <!-- Leaflet Routing Machine JS -->
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <!-- CSS Externo -->
    <link rel="stylesheet" href="lugardeatencion.css">
</head>
<body>
    <div class="top-container">
        <div class="top-logo-container">
            <img src="https://dondemeatiendo.essalud.gob.pe/assets/images/logo-essalud-v2.png" alt="Logo EsSalud" loading="lazy">
        </div>
        <div class="relative flex items-center gap-3">
            <button id="home-btn" class="home-button" title="Volver al inicio">
                <img src="https://cdn-icons-png.flaticon.com/512/9073/9073032.png" alt="Inicio" class="home-icon" loading="lazy">
                <span class="home-text">Volver</span>
            </button>
            <button id="user-menu-button" class="user-menu-button">
                <span id="user-initials">U</span>
            </button>
            <div id="user-menu" class="user-menu">
                <a href="#" id="logout">Cerrar sesiÃ³n</a>
            </div>
        </div>
    </div>

    <div class="content">
        <!-- Panel de InformaciÃ³n -->
        <div class="info-panel">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">Centro de AtenciÃ³n</h2>
            
            <!-- Selector de Hospital -->
            <div class="mb-4">
                <label for="hospital-select" class="block text-gray-700 font-medium mb-2">Seleccionar Centro de AtenciÃ³n</label>
                <select id="hospital-select" class="p-2 border border-gray-300 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="" disabled selected>Selecciona un centro</option>
                </select>
            </div>

            <!-- Estado de UbicaciÃ³n -->
            <div id="location-status" class="location-status" style="display: none;"></div>

            <!-- InformaciÃ³n del Hospital -->
            <div id="hospital-details" class="hospital-info" style="display: none;">
                <h3 id="hospital-name"></h3>
                <div class="info-item">
                    <span class="info-label">ğŸ“ DirecciÃ³n:</span>
                    <span class="info-value" id="hospital-address"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸ“ TelÃ©fono:</span>
                    <span class="info-value" id="hospital-phone"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸ¢ Distrito:</span>
                    <span class="info-value" id="hospital-district"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸ• Horarios:</span>
                    <span class="info-value" id="hospital-hours"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸšŒ Transporte:</span>
                    <span class="info-value" id="hospital-transport"></span>
                </div>
            </div>

            <!-- Botones de AcciÃ³n -->
            <div id="action-buttons" style="display: none;">
                <button id="generate-route-btn" class="button button-success">
                    ğŸ—ºï¸ Generar Ruta
                </button>
                <button id="show-buses-btn" class="button button-warning">
                    ğŸšŒ Ver Buses
                </button>
                <button id="enable-location-btn" class="button" style="display: none;">
                    ğŸ“ Activar UbicaciÃ³n
                </button>
            </div>

            <!-- Recomendaciones -->
            <div id="recommendations" class="recommendations" style="display: none;">
                <h4>ğŸ’¡ Recomendaciones</h4>
                <ul id="recommendations-list"></ul>
            </div>
        </div>

        <!-- Panel del Mapa -->
        <div class="map-panel">
            <h3 class="text-xl font-semibold text-blue-600 mb-4">UbicaciÃ³n y Rutas</h3>
            <div id="map-loading" class="loading">
                <div class="spinner"></div>
                <p>Cargando mapa...</p>
            </div>
            <div id="map" style="display: none;"></div>
        </div>
    </div>

    <!-- Modal para Buses -->
    <div id="buses-modal" class="modal">
        <div class="modal-content">
            <button class="close-button" id="close-buses-modal">&times;</button>
            <h3 class="text-xl font-semibold text-blue-600 mb-4">ğŸšŒ Transporte PÃºblico</h3>
            <div id="buses-container">
                <!-- Buses se cargarÃ¡n aquÃ­ -->
            </div>
        </div>
    </div>

    <!-- JavaScript Externo -->
    <script src="lugardeatencion.js"></script>
</body>
</html>